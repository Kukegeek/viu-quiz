<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIU Quiz - Test de IngenierÃ­a Web</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">ğŸ“š</span>
                <span class="logo-text">VIU Quiz</span>
            </div>
            <button id="stats-btn" class="btn-icon" title="Ver estadÃ­sticas">
                <span>ğŸ“Š</span>
            </button>
        </header>

        <!-- Pantalla Principal -->
        <main id="home-screen" class="screen active">
            <div class="hero">
                <h1>Test de IngenierÃ­a Web</h1>
                <p>PrepÃ¡rate para tu examen con tests personalizados</p>
            </div>

            <!-- EstadÃ­sticas RÃ¡pidas -->
            <section class="quick-stats">
                <div class="stat-card">
                    <span class="stat-value" id="best-score">--</span>
                    <span class="stat-label">Mejor Nota</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="best-time">--</span>
                    <span class="stat-label">Mejor Tiempo</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="accuracy">--</span>
                    <span class="stat-label">% Acierto</span>
                </div>
            </section>

            <!-- Podium por Modo -->
            <section class="podiums-section">
                <h2>ğŸ† Mejores resultados por modo</h2>
                <div class="podiums-grid">
                    <div class="podium-card">
                        <div class="podium-header">
                            <span class="podium-icon">âš¡</span>
                            <span class="podium-title">Mini Test</span>
                        </div>
                        <div class="podium-content" id="podium-mini">
                            <span class="podium-empty">Sin datos</span>
                        </div>
                    </div>
                    <div class="podium-card">
                        <div class="podium-header">
                            <span class="podium-icon">ğŸ“</span>
                            <span class="podium-title">Normal</span>
                        </div>
                        <div class="podium-content" id="podium-normal">
                            <span class="podium-empty">Sin datos</span>
                        </div>
                    </div>
                    <div class="podium-card">
                        <div class="podium-header">
                            <span class="podium-icon">ğŸ“</span>
                            <span class="podium-title">Examen</span>
                        </div>
                        <div class="podium-content" id="podium-examen">
                            <span class="podium-empty">Sin datos</span>
                        </div>
                    </div>
                    <div class="podium-card">
                        <div class="podium-header">
                            <span class="podium-icon">ğŸ”¥</span>
                            <span class="podium-title">Ultra</span>
                        </div>
                        <div class="podium-content" id="podium-ultra">
                            <span class="podium-empty">Sin datos</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Selector de Modo -->
            <section class="mode-selector">
                <h2>Selecciona el modo</h2>
                
                <div class="mode-cards">
                    <button class="mode-card" data-mode="mini">
                        <span class="mode-icon">âš¡</span>
                        <span class="mode-name">Mini Test</span>
                        <span class="mode-info">10 preguntas Â· 15 min</span>
                    </button>
                    
                    <button class="mode-card" data-mode="normal">
                        <span class="mode-icon">ğŸ“</span>
                        <span class="mode-name">Normal</span>
                        <span class="mode-info">20 preguntas Â· 30 min</span>
                    </button>
                    
                    <button class="mode-card" data-mode="examen">
                        <span class="mode-icon">ğŸ“</span>
                        <span class="mode-name">Examen</span>
                        <span class="mode-info">40 preguntas Â· 60 min</span>
                    </button>
                    
                    <button class="mode-card" data-mode="ultra">
                        <span class="mode-icon">ğŸ”¥</span>
                        <span class="mode-name">Ultra</span>
                        <span class="mode-info">64 preguntas Â· 100 min</span>
                    </button>
                </div>

                <!-- BotÃ³n Repasar Falladas -->
                <div class="review-failed-section">
                    <button id="review-failed-btn" class="btn btn-warning" disabled>
                        <span>ğŸ”„</span>
                        Repasar falladas
                        <span class="failed-badge" id="failed-count">0</span>
                    </button>
                    <p class="review-hint">Repasa las preguntas que has fallado en tests anteriores</p>
                </div>

                <!-- Selector de MÃ³dulo -->
                <div class="module-section">
                    <h3>O practica por mÃ³dulo</h3>
                    <select id="module-select" class="select-module">
                        <option value="">Seleccionar mÃ³dulo...</option>
                        <option value="1">ğŸ“˜ IntegraciÃ³n de Sistemas y WIS</option>
                        <option value="2">ğŸ“— MetodologÃ­as de Desarrollo</option>
                        <option value="3">ğŸ“™ Modelado de Negocio</option>
                        <option value="4">ğŸ“• Arquitectura y Modelado</option>
                        <option value="5">ğŸ““ TÃ©cnicas y ProgramaciÃ³n</option>
                    </select>
                </div>

                <!-- Toggle Feedback -->
                <div class="feedback-toggle">
                    <label class="toggle-container">
                        <input type="checkbox" id="feedback-toggle">
                        <span class="toggle-slider"></span>
                        <span class="toggle-label">Feedback instantÃ¡neo</span>
                    </label>
                    <p class="toggle-hint">Ver si aciertas o fallas cada pregunta al momento</p>
                </div>
            </section>
        </main>

        <!-- Pantalla del Quiz -->
        <main id="quiz-screen" class="screen">
            <div class="quiz-header">
                <div class="quiz-progress">
                    <span id="question-counter">1/10</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
                <div class="quiz-timer" id="timer">
                    <span class="timer-icon">â±ï¸</span>
                    <span id="timer-display">15:00</span>
                </div>
            </div>

            <div class="quiz-score hidden" id="live-score">
                <span>PuntuaciÃ³n: <strong id="current-score">0.00</strong>/10</span>
            </div>

            <div class="quiz-content">
                <div class="question-card">
                    <span class="question-module" id="question-module">MÃ³dulo 1</span>
                    <h2 class="question-text" id="question-text">Â¿Pregunta de ejemplo?</h2>
                </div>

                <div class="options-container" id="options-container">
                    <!-- Opciones se generan dinÃ¡micamente -->
                </div>
            </div>

            <div class="quiz-actions">
                <button id="prev-btn" class="btn btn-secondary" disabled>
                    <span>â†</span> Anterior
                </button>
                <button id="next-btn" class="btn btn-primary">
                    Siguiente <span>â†’</span>
                </button>
                <button id="finish-btn" class="btn btn-success hidden">
                    Finalizar âœ“
                </button>
            </div>

            <button id="quit-btn" class="btn-quit">Abandonar test</button>
        </main>

        <!-- Pantalla de Resultados -->
        <main id="results-screen" class="screen">
            <div class="results-header">
                <div class="results-icon" id="results-icon">ğŸ†</div>
                <h1 id="results-title">Â¡Test completado!</h1>
            </div>

            <div class="results-main">
                <div class="score-circle">
                    <svg viewBox="0 0 100 100">
                        <circle class="score-bg" cx="50" cy="50" r="45"/>
                        <circle class="score-fill" cx="50" cy="50" r="45" id="score-circle"/>
                    </svg>
                    <div class="score-value">
                        <span id="final-score">0.00</span>
                        <span class="score-max">/10</span>
                    </div>
                </div>
            </div>

            <div class="results-details">
                <div class="result-item">
                    <span class="result-icon">â±ï¸</span>
                    <div class="result-info">
                        <span class="result-label">Tiempo</span>
                        <span class="result-value" id="result-time">00:00</span>
                    </div>
                </div>
                <div class="result-item correct">
                    <span class="result-icon">âœ…</span>
                    <div class="result-info">
                        <span class="result-label">Correctas</span>
                        <span class="result-value" id="result-correct">0</span>
                    </div>
                </div>
                <div class="result-item incorrect">
                    <span class="result-icon">âŒ</span>
                    <div class="result-info">
                        <span class="result-label">Incorrectas</span>
                        <span class="result-value" id="result-incorrect">0</span>
                    </div>
                </div>
                <div class="result-item">
                    <span class="result-icon">â­ï¸</span>
                    <div class="result-info">
                        <span class="result-label">Sin responder</span>
                        <span class="result-value" id="result-unanswered">0</span>
                    </div>
                </div>
            </div>

            <p class="failed-info hidden" id="failed-info">Preguntas falladas pendientes: 0</p>

            <div class="results-comparison" id="results-comparison">
                <h3>ğŸ“ˆ Comparativa con tus mejores</h3>
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <span class="comparison-label">Tu mejor nota</span>
                        <span class="comparison-value" id="compare-best-score">--</span>
                    </div>
                    <div class="comparison-item">
                        <span class="comparison-label">Tu mejor tiempo</span>
                        <span class="comparison-value" id="compare-best-time">--</span>
                    </div>
                </div>
            </div>

            <div class="results-actions">
                <button id="review-btn" class="btn btn-secondary">
                    ğŸ“‹ Revisar respuestas
                </button>
                <button id="retry-btn" class="btn btn-primary">
                    ğŸ”„ Repetir test
                </button>
                <button id="home-btn" class="btn btn-outline">
                    ğŸ  Volver al inicio
                </button>
            </div>
        </main>

        <!-- Pantalla de RevisiÃ³n -->
        <main id="review-screen" class="screen">
            <div class="review-header">
                <button id="back-results-btn" class="btn-back">
                    â† Volver a resultados
                </button>
                <h1>RevisiÃ³n de respuestas</h1>
            </div>

            <div class="review-list" id="review-list">
                <!-- Se genera dinÃ¡micamente -->
            </div>
        </main>

        <!-- Modal de EstadÃ­sticas -->
        <div id="stats-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ğŸ“Š Tus estadÃ­sticas</h2>
                    <button id="close-stats" class="btn-close">Ã—</button>
                </div>
                <div class="modal-body">
                    <div class="stats-summary">
                        <div class="stat-box">
                            <span class="stat-big" id="stats-tests-count">0</span>
                            <span class="stat-text">Tests realizados</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-big" id="stats-avg-score">--</span>
                            <span class="stat-text">Nota media</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-big" id="stats-accuracy">--</span>
                            <span class="stat-text">% Acierto global</span>
                        </div>
                    </div>

                    <h3>ğŸ† Top 10 mejores tests</h3>
                    <div class="top-tests-list" id="top-tests-list">
                        <p class="empty-state">AÃºn no has completado ningÃºn test</p>
                    </div>

                    <button id="clear-stats-btn" class="btn btn-danger">
                        ğŸ—‘ï¸ Borrar todos los datos
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal de ConfirmaciÃ³n -->
        <div id="confirm-modal" class="modal">
            <div class="modal-content modal-small">
                <h3 id="confirm-title">Â¿EstÃ¡s seguro?</h3>
                <p id="confirm-message">Esta acciÃ³n no se puede deshacer.</p>
                <div class="modal-actions">
                    <button id="confirm-cancel" class="btn btn-secondary">Cancelar</button>
                    <button id="confirm-ok" class="btn btn-danger">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js?v=2.0.2"></script>
</body>
</html>
